<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>validateScenarios • piamValidation</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Source_Sans_Pro-0.4.9/font.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="validateScenarios">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">piamValidation</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.7.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/validateScenarios.html">validateScenarios</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/pik-piam/piamValidation/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>validateScenarios</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/pik-piam/piamValidation/blob/main/vignettes/validateScenarios.Rmd" class="external-link"><code>vignettes/validateScenarios.Rmd</code></a></small>
      <div class="d-none name"><code>validateScenarios.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/pik-piam/piamValidation" class="external-link">piamValidation</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span></code></pre></div>
<div class="section level2">
<h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h2>
<p>The function <code><a href="../reference/validateScenarios.html">validateScenarios()</a></code> performs validation
checks on IAM scenario data based on thresholds provided in a tailored
config file. These checks either analyse the agreement with historical
reference data or expectations on the scenario data.</p>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>The package is available via the R package repository of PIK.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"piamValidation"</span>, repos <span class="op">=</span> <span class="st">"https://rse.pik-potsdam.de/r/packages"</span><span class="op">)</span></span></code></pre></div>
<p>For more detailed information please refer to the <a href="https://github.com/pik-piam/piamValidation/tree/main?tab=readme-ov-file#installation" class="external-link">Readme</a>.</p>
</div>
<div class="section level2">
<h2 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a>
</h2>
<div class="section level3">
<h3 id="remind-output-script">REMIND output script<a class="anchor" aria-label="anchor" href="#remind-output-script"></a>
</h3>
<p>When working directly with REMIND, a script comes shipped with the
code which will make it easy to perform a basic scenario validation. Go
to the REMIND directory <code>remind/</code> and call
<code>Rscript output.R</code>. Then choose “Comparison across runs” and
“validateScenarios”. Select the runs of interest and choose one of the
<code>validationConfigs</code> that are available via
<code>piamValidation</code>. If you are not sure which config to choose,
“default” is a good starting point.</p>
</div>
<div class="section level3">
<h3 id="scenario-validation">Scenario Validation<a class="anchor" aria-label="anchor" href="#scenario-validation"></a>
</h3>
<p>More generally, the function
<code><a href="../reference/validateScenarios.html">piamValidation::validateScenarios()</a></code> performs all necessary
steps of the validation process. It takes the config file and iterates
through each row, assembling the required scenario and reference data
and checking the thresholds.</p>
<p>The output is a data.frame, which combines scenario and reference
data with the threshold that is applied to each respective data point
and the result of the validation checks. These results can be found in
the columns <code>check_value</code> and <code>check</code>, with the
former containing the value that is directly compared to the thresholds
( e.g. the calculated growth rate when doing a growth rate check) and
the latter being the result in form of a traffic-light color.</p>
<div class="float">
<img src="thresholds.png" style="width:80.0%" alt="Traffic-light threshold check results."><div class="figcaption">Traffic-light threshold check results.</div>
</div>
<p>Using <code><a href="../reference/validateScenarios.html">piamValidation::validateScenarios()</a></code> with the
argument <code>extraColors = TRUE</code> (default: <code>TRUE</code>)
enables a differentiation between violating lower vs. upper bounds (note
that the threshold names <code>min_red</code> and <code>min_yel</code>
do not change).</p>
<div class="float">
<img src="thresholds_extracolors.png" style="width:80.0%" alt="Traffic-light threshold check results."><div class="figcaption">Traffic-light threshold check results.</div>
</div>
<p>Optionally, you can save the resulting data.frame to a .csv file by
providing an <code>outputFile</code>.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/validateScenarios.html">validateScenarios</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">scenPath</span>, <span class="va">histPath</span><span class="op">)</span>, <span class="va">config</span>, outputFile <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div>
<p>The function argument <code>config</code> can be either the name of a
config file found in <code>piamValidation</code> (find the name via
<code>inst/config/validationConfig_&lt;name&gt;.csv</code>) or a full
path to a config file.</p>
</div>
<div class="section level3">
<h3 id="validation-report">Validation Report<a class="anchor" aria-label="anchor" href="#validation-report"></a>
</h3>
<p>To perform the validation and create an output document in one go,
the function <code><a href="../reference/validationReport.html">piamValidation::validationReport()</a></code> can be
used. It calls <code>validateScenarios</code> and additionally renders
an .html file which features heat maps for all variables described in
the config file.</p>
<p>By default, the .Rmd <code>validation_default</code> is used, but
alternatives can be used or created according to individual needs in
<code>inst/markdown</code>.</p>
<p>The report is saved in a folder called <code>output</code> in the
current working directory.</p>
<p>-&gt; Be careful when using this function on big data sets and
configs with many variables as it might create very large html
files.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/validationReport.html">validationReport</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">scenPath</span>, <span class="va">histPath</span><span class="op">)</span>, <span class="va">config</span>, report <span class="op">=</span> <span class="st">"default"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="scenario-data">Scenario Data<a class="anchor" aria-label="anchor" href="#scenario-data"></a>
</h3>
<p>You can pass IAMC-style .mif, .csv or .xlsx files or vectors of paths
to the function. More precisely, any data file which can be read by
<code><a href="https://rdrr.io/pkg/quitte/man/read.quitte.html" class="external-link">quitte::read.quitte()</a></code> featuring the columns:</p>
<p><em>Model, Scenario, Region, Variable, Unit, &lt;years&gt;</em></p>
</div>
<div class="section level3">
<h3 id="reference-data">Reference Data<a class="anchor" aria-label="anchor" href="#reference-data"></a>
</h3>
<p>Reference data should follow the same format guidelines as scenario
data with the exception that the <code>scenario</code> column needs to
read <code>historical</code>. It is passed to the validation function
together with the scenario data as part of the <code>dataPath</code>
argument, e.g.:</p>
<p><code>validateScenarios(dataPath = c("&lt;path_to_scenario_data&gt;", "&lt;path_to_reference_data&gt;"), config = ...)</code></p>
</div>
<div class="section level3">
<h3 id="configuration-file">Configuration File<a class="anchor" aria-label="anchor" href="#configuration-file"></a>
</h3>
<p>The config file is the place where the validation checks are defined.
It offers a lot of flexibility for many different types of check but
writing the file also comes with a few rules - depending on the type of
check which should be performed, different columns can or need to be
filled.</p>
<div class="float">
<img src="config_rules.jpg" style="width:100.0%" alt="Rules for writing the config file for 6 different use cases."><div class="figcaption">Rules for writing the config file for 6
different use cases.</div>
</div>
<p><strong>General Rules</strong></p>
<ul>
<li>one set of thresholds per row is allowed</li>
<li>empty rows and rows without “variable” are ignored and can be used
to structure the config</li>
<li>later rows overwrite earlier rows if there is a data overlap (within
one metric)</li>
<li>only choose one of the <code>ref_</code> columns per row.</li>
</ul>
<div class="section level4">
<h4 id="columns">Columns<a class="anchor" aria-label="anchor" href="#columns"></a>
</h4>
<p><em>Comparison Type</em></p>
<p><strong>metric</strong>: decide which type of comparison will be
performed, currently supported:
<code>relative, difference, absolute, growthrate</code></p>
<p><strong>critical</strong>: is it considered to be a critical check?
the function <code>validationPass</code> will only complain about failed
checks if this is set to “yes”</p>
<p><em>Which data will be validated?</em></p>
<p><strong>variable</strong>: choose one or multiple variables to be
checked; define multiple variables via “*” (one sub-level) or “**” (all
sub-levels)</p>
<p><strong>unit</strong>: see paragraph below</p>
<p><strong>model</strong>: choose one or multiple (comma-separated)
models, or leave empty to choose all</p>
<p><strong>scenario</strong>: choose one or multiple (comma-separated)
scenarios, or leave empty to choose all</p>
<p><strong>region</strong>: choose one or multiple (comma-separated)
regions, or leave empty to choose all</p>
<p><strong>period</strong>: choose one or multiple (comma-separated)
periods, or leave empty to choose all (for historical checks:
<code>2005 - 2020</code>, all other cases: <code>&lt; 2100</code>). You
can also select a range via <code>yyyy-yyyy</code>.</p>
<p><em>Thresholds</em></p>
<p><strong>min/max_yel/red</strong>: minimum and maximum thresholds
which decide whether a check is passed (<code>green</code>), produces a
warning (<code>yellow</code>) or is failed (<code>red</code>). If
reference data is missing the result will be <code>grey</code>. Each
line needs at least one threshold. <code>relative</code> thresholds can
be given either as percentage (<code>20%</code>) or decimal
(<code>0.2</code>).</p>
<p><em>What are we comparing to?</em></p>
<p><strong>ref_model</strong>: for model comparison set a reference
model here, also setting the column <code>model</code> is recommended to
avoid comparing a model to itself</p>
<p><strong>ref_scenario</strong>: this column can be used in two ways -
either compare two scenarios produced by the same model to one-another
(similar to model comparison), or set it to <code>historical</code> to
compare model data to observational data provided by one or multiple
external sources.</p>
<p>It is recommended to choose a historical reference source explicitly
in the “ref_model” column for historical comparisons. Otherwise, all
available historical sources will be used.</p>
<p><strong>ref_period</strong>: compare data between different periods,
set the reference period here.</p>
</div>
<div class="section level4">
<h4 id="using-multiple-references">Using multiple references<a class="anchor" aria-label="anchor" href="#using-multiple-references"></a>
</h4>
<p>Scenario data can not only be compared to a single reference value
but alternatively to a range of references. When performing checks
against historical or scenario reference data (metrics
<code>relative</code> and <code>difference</code>) it is possible to
specify <code>range(ref1, ref2, ..., refx)</code> in the
<code>ref_model</code>, <code>ref_scenario</code> or
<code>ref_period</code> column. This results in the upper thresholds
being evaluated against the maximum of the respective references, while
the lower thresholds are compared to the minimum.</p>
<p>Internally, this means splitting up the ref_value column into
ref_value_min and ref_value_max, similarly check_value.</p>
<p>The default behavior when specifying multiple references in the
validation config without specifying a mode, is the calculation of the
arithmetic mean of all references. This can be specified explicitly via
<code>mean(ref1, ...)</code>. In this case the min/max columns will
contain equal values.</p>
<p>Examples are available as part of the testing routine in
<code>tests/testthat/test-referenceRange.R</code>.</p>
</div>
<div class="section level4">
<h4 id="units">Units<a class="anchor" aria-label="anchor" href="#units"></a>
</h4>
<p>It is recommended to include the unit of each variable in the config
file to avoid inconsistency between data sources. The tool performs
checks, whether the units in the config match those in scenario and
reference data and returns a warning in case they don’t. This check is
performed using <code><a href="https://rdrr.io/pkg/piamInterfaces/man/areUnitsIdentical.html" class="external-link">piamInterfaces::areUnitsIdentical()</a></code> to
avoid false positives.</p>
<p>In case scenario or reference data contains variables with multiple
units, it will be filtered for the units matching those from the config
file.</p>
<p>If the <code>unit</code> column is left empty, no consistency check
will be performed. This is the recommended approach when selecting
multiple variables in one go via <code>**</code>, which don’t all share
the same unit.</p>
</div>
</div>
<div class="section level3">
<h3 id="use-cases">Use Cases<a class="anchor" aria-label="anchor" href="#use-cases"></a>
</h3>
<p>To give some examples how to define various validation checks, see
the 6 use cases below.</p>
<div class="section level4">
<h4 id="use-case-1-relative-comparison-to-reference-data">Use Case 1: relative comparison to reference data<a class="anchor" aria-label="anchor" href="#use-case-1-relative-comparison-to-reference-data"></a>
</h4>
<p>You want to compare your scenario data to an external reference
source, which provides historical (or projected) data for the variable
you are interested in. The thresholds are defined as a
<code>relative</code> deviation above or below the reference value:
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext mathvariant="normal">relDeviation</mtext><mo>=</mo><mfrac><mrow><mo stretchy="true" form="prefix">(</mo><mtext mathvariant="normal">scenValue</mtext><mo>−</mo><mtext mathvariant="normal">refValue</mtext><mo stretchy="true" form="postfix">)</mo></mrow><mtext mathvariant="normal">refValue</mtext></mfrac></mrow><annotation encoding="application/x-tex">\textrm{relDeviation} = \frac{(\textrm{scenValue} - \textrm{refValue})}{\textrm{refValue}}</annotation></semantics></math>.</p>
<p>Example:</p>
<table style="width:100%;" class="table">
<colgroup>
<col width="6%">
<col width="6%">
<col width="9%">
<col width="4%">
<col width="4%">
<col width="6%">
<col width="5%">
<col width="5%">
<col width="6%">
<col width="6%">
<col width="6%">
<col width="6%">
<col width="7%">
<col width="9%">
<col width="8%">
</colgroup>
<thead><tr class="header">
<th>metric</th>
<th>critical</th>
<th>variable</th>
<th>unit</th>
<th>model</th>
<th>scenario</th>
<th>region</th>
<th>period</th>
<th>min_red</th>
<th>min_yel</th>
<th>max_yel</th>
<th>max_red</th>
<th>ref_model</th>
<th>ref_scenario</th>
<th>ref_period</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>relative</td>
<td>yes</td>
<td>Emi|CO2|Energy</td>
<td>Mt CO2/yr</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>-0.25</td>
<td>-0.2</td>
<td>0.2</td>
<td>0.25</td>
<td>EDGAR8</td>
<td>historical</td>
<td></td>
</tr>
<tr class="even">
<td>relative</td>
<td>yes</td>
<td>Emi|CO2|Energy</td>
<td>Mt CO2/yr</td>
<td></td>
<td></td>
<td>World</td>
<td></td>
<td>-0.2</td>
<td>-0.1</td>
<td>0.1</td>
<td>0.2</td>
<td>EDGAR8</td>
<td>historical</td>
<td></td>
</tr>
</tbody>
</table>
</div>
<div class="section level4">
<h4 id="use-case-2-difference-to-reference-data">Use Case 2: difference to reference data<a class="anchor" aria-label="anchor" href="#use-case-2-difference-to-reference-data"></a>
</h4>
<p>You want to compare your scenario data to an external reference
source, which provides historical (or projected) data for the variable
you are interested in.</p>
<p>The thresholds are defined as a <code>difference</code> (above or
below) to the reference value:
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext mathvariant="normal">difference</mtext><mo>=</mo><mtext mathvariant="normal">scenValue</mtext><mo>−</mo><mtext mathvariant="normal">refValue</mtext></mrow><annotation encoding="application/x-tex">\textrm{difference} = \textrm{scenValue} - \textrm{refValue}</annotation></semantics></math>.</p>
<p>Example:</p>
<table style="width:100%;" class="table">
<colgroup>
<col width="6%">
<col width="6%">
<col width="9%">
<col width="4%">
<col width="4%">
<col width="6%">
<col width="5%">
<col width="5%">
<col width="6%">
<col width="6%">
<col width="6%">
<col width="6%">
<col width="7%">
<col width="9%">
<col width="8%">
</colgroup>
<thead><tr class="header">
<th>metric</th>
<th>critical</th>
<th>variable</th>
<th>unit</th>
<th>model</th>
<th>scenario</th>
<th>region</th>
<th>period</th>
<th>min_red</th>
<th>min_yel</th>
<th>max_yel</th>
<th>max_red</th>
<th>ref_model</th>
<th>ref_scenario</th>
<th>ref_period</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>difference</td>
<td>yes</td>
<td>Emi|CO2|Energy</td>
<td>Mt CO2/yr</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>-100</td>
<td>-50</td>
<td>50</td>
<td>100</td>
<td>EDGAR8</td>
<td>historical</td>
<td></td>
</tr>
<tr class="even">
<td>difference</td>
<td>yes</td>
<td>Emi|CO2|Energy</td>
<td>Mt CO2/yr</td>
<td></td>
<td></td>
<td>World</td>
<td></td>
<td>-500</td>
<td>-200</td>
<td>200</td>
<td>500</td>
<td>EDGAR8</td>
<td>historical</td>
<td></td>
</tr>
</tbody>
</table>
</div>
<div class="section level4">
<h4 id="use-case-3-relative-comparison-to-other-modelscenarioperiod">Use Case 3: relative comparison to other model/scenario/period<a class="anchor" aria-label="anchor" href="#use-case-3-relative-comparison-to-other-modelscenarioperiod"></a>
</h4>
<p>You want to compare your scenario data to itself, either by comparing
periods, scenarios or models to one another. You select one or multiple
periods/scenarios/models in the respective “period/scenario/model”
column and <em>exactly</em> one in the “ref_period/scenario/model”
column.</p>
<p>The thresholds are defined as a <code>relative</code> deviation above
or below the reference value:
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext mathvariant="normal">relDeviation</mtext><mo>=</mo><mfrac><mrow><mo stretchy="true" form="prefix">(</mo><mtext mathvariant="normal">scenValue</mtext><mo>−</mo><mtext mathvariant="normal">refValue</mtext><mo stretchy="true" form="postfix">)</mo></mrow><mtext mathvariant="normal">refValue</mtext></mfrac></mrow><annotation encoding="application/x-tex">\textrm{relDeviation} = \frac{(\textrm{scenValue} - \textrm{refValue})}{\textrm{refValue}}</annotation></semantics></math>.</p>
<p>Example:</p>
<table class="table">
<colgroup>
<col width="6%">
<col width="6%">
<col width="9%">
<col width="4%">
<col width="4%">
<col width="6%">
<col width="5%">
<col width="4%">
<col width="6%">
<col width="6%">
<col width="6%">
<col width="6%">
<col width="7%">
<col width="9%">
<col width="8%">
</colgroup>
<thead><tr class="header">
<th>metric</th>
<th>critical</th>
<th>variable</th>
<th>unit</th>
<th>model</th>
<th>scenario</th>
<th>region</th>
<th>period</th>
<th>min_red</th>
<th>min_yel</th>
<th>max_yel</th>
<th>max_red</th>
<th>ref_model</th>
<th>ref_scenario</th>
<th>ref_period</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>relative</td>
<td>yes</td>
<td>Emi|CO2|Energy</td>
<td>Mt CO2/yr</td>
<td>REMIND</td>
<td></td>
<td></td>
<td></td>
<td>-20%</td>
<td>-10%</td>
<td>10%</td>
<td>20%</td>
<td>MESSAGE</td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>relative</td>
<td>yes</td>
<td>Emi|CO2|Energy</td>
<td>Mt CO2/yr</td>
<td></td>
<td>NDC</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>-25%</td>
<td>-10%</td>
<td></td>
<td>CurPol</td>
<td></td>
</tr>
<tr class="odd">
<td>relative</td>
<td>yes</td>
<td>Emi|CO2|Energy</td>
<td>Mt CO2/yr</td>
<td></td>
<td>CurPol</td>
<td></td>
<td>2030</td>
<td>10%</td>
<td>20%</td>
<td>60%</td>
<td>80%</td>
<td></td>
<td></td>
<td>2020</td>
</tr>
<tr class="even">
<td>relative</td>
<td>yes</td>
<td>Emi|CO2|Energy</td>
<td>Mt CO2/yr</td>
<td></td>
<td>NDC</td>
<td></td>
<td>2030</td>
<td>-20%</td>
<td>-10%</td>
<td>20%</td>
<td>40%</td>
<td></td>
<td></td>
<td>2020</td>
</tr>
</tbody>
</table>
<p>Currently, there is no support to compare different regions or
variables to one another.</p>
</div>
<div class="section level4">
<h4 id="use-case-4-difference-to-other-modelscenarioperiod">Use Case 4: difference to other model/scenario/period<a class="anchor" aria-label="anchor" href="#use-case-4-difference-to-other-modelscenarioperiod"></a>
</h4>
<p>You want to compare your scenario data to itself, either by comparing
periods, scenarios or models to one another. You select one or multiple
periods/scenarios/models in the respective “period/scenario/model”
column and <em>exactly</em> one in the “ref_period/scenario/model”
column.</p>
<p>The thresholds are defined as a <code>difference</code> (above or
below) to the reference value:
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext mathvariant="normal">difference</mtext><mo>=</mo><mtext mathvariant="normal">scenValue</mtext><mo>−</mo><mtext mathvariant="normal">refValue</mtext></mrow><annotation encoding="application/x-tex">\textrm{difference} = \textrm{scenValue} - \textrm{refValue}</annotation></semantics></math>.</p>
<p>Example:</p>
<table class="table">
<colgroup>
<col width="6%">
<col width="6%">
<col width="9%">
<col width="4%">
<col width="4%">
<col width="6%">
<col width="5%">
<col width="4%">
<col width="6%">
<col width="6%">
<col width="6%">
<col width="6%">
<col width="7%">
<col width="9%">
<col width="8%">
</colgroup>
<thead><tr class="header">
<th>metric</th>
<th>critical</th>
<th>variable</th>
<th>unit</th>
<th>model</th>
<th>scenario</th>
<th>region</th>
<th>period</th>
<th>min_red</th>
<th>min_yel</th>
<th>max_yel</th>
<th>max_red</th>
<th>ref_model</th>
<th>ref_scenario</th>
<th>ref_period</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>difference</td>
<td>yes</td>
<td>Emi|CO2|Energy</td>
<td>Mt CO2/yr</td>
<td>REMIND</td>
<td></td>
<td>World</td>
<td>2020</td>
<td>-1500</td>
<td>-500</td>
<td>500</td>
<td>1500</td>
<td>MESSAGE</td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>difference</td>
<td>yes</td>
<td>Emi|CO2|Energy</td>
<td>Mt CO2/yr</td>
<td></td>
<td>NDC</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>-25%</td>
<td>-10%</td>
<td></td>
<td>CurPol</td>
<td></td>
</tr>
<tr class="odd">
<td>difference</td>
<td>yes</td>
<td>Emi|CO2|Energy</td>
<td>Mt CO2/yr</td>
<td></td>
<td>CurPol</td>
<td></td>
<td>2030</td>
<td>10%</td>
<td>20%</td>
<td>60%</td>
<td>80%</td>
<td></td>
<td></td>
<td>2020</td>
</tr>
<tr class="even">
<td>difference</td>
<td>yes</td>
<td>Emi|CO2|Energy</td>
<td>Mt CO2/yr</td>
<td></td>
<td>NDC</td>
<td></td>
<td>2030</td>
<td>-20%</td>
<td>-10%</td>
<td>20%</td>
<td>40%</td>
<td></td>
<td></td>
<td>2020</td>
</tr>
</tbody>
</table>
</div>
<div class="section level4">
<h4 id="use-case-5-direct-comparison-to-absolute-thresholds">Use Case 5: direct comparison to absolute thresholds<a class="anchor" aria-label="anchor" href="#use-case-5-direct-comparison-to-absolute-thresholds"></a>
</h4>
<p>You want to compare your scenario data to explicit values. This could
be the case if you want to do sanity checks on variables that should
never leave a certain range or you have expert guesses on
<code>absolute</code> upper or lower thresholds.</p>
<p>The tool checks whether
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext mathvariant="normal">minRed/Yel</mtext><mo>&lt;</mo><mtext mathvariant="normal">scenValue</mtext><mo>&lt;</mo><mtext mathvariant="normal">maxYel/Red</mtext></mrow><annotation encoding="application/x-tex">\textrm{minRed/Yel} &lt; \textrm{scenValue} &lt; \textrm{maxYel/Red}</annotation></semantics></math>.</p>
<p>Example:</p>
<table class="table">
<colgroup>
<col width="6%">
<col width="6%">
<col width="9%">
<col width="4%">
<col width="4%">
<col width="6%">
<col width="5%">
<col width="4%">
<col width="6%">
<col width="6%">
<col width="6%">
<col width="6%">
<col width="7%">
<col width="9%">
<col width="8%">
</colgroup>
<thead><tr class="header">
<th>metric</th>
<th>critical</th>
<th>variable</th>
<th>unit</th>
<th>model</th>
<th>scenario</th>
<th>region</th>
<th>period</th>
<th>min_red</th>
<th>min_yel</th>
<th>max_yel</th>
<th>max_red</th>
<th>ref_model</th>
<th>ref_scenario</th>
<th>ref_period</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>absolute</td>
<td>yes</td>
<td>Share|**</td>
<td>%</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>0</td>
<td></td>
<td></td>
<td>100</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>absolute</td>
<td>yes</td>
<td>Carbon Management|Storage</td>
<td>Mt CO2/yr</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>10 000</td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
</div>
<div class="section level4">
<h4 id="use-case-6-direct-comparison-to-yearly-growthrate">Use Case 6: direct comparison to yearly growthrate<a class="anchor" aria-label="anchor" href="#use-case-6-direct-comparison-to-yearly-growthrate"></a>
</h4>
<p>You want to check growth rates of variables in your scenario data. As
5-year steps are expected, the average yearly growth rate over the last
5 years is calculated via:</p>
<p><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext mathvariant="normal">growthRate</mtext><mo>=</mo><msup><mrow><mo stretchy="true" form="prefix">(</mo><mfrac><mtext mathvariant="normal">value</mtext><mtext mathvariant="normal">value5yearsAgo</mtext></mfrac><mo stretchy="true" form="postfix">)</mo></mrow><mfrac><mn>1</mn><mn>5</mn></mfrac></msup><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">\textrm{growthRate} = \left(\frac{\textrm{value}}{\textrm{value5yearsAgo}}\right)^\frac{1}{5} - 1</annotation></semantics></math>.</p>
<p>Example:</p>
<table class="table">
<colgroup>
<col width="6%">
<col width="6%">
<col width="9%">
<col width="4%">
<col width="4%">
<col width="6%">
<col width="5%">
<col width="4%">
<col width="6%">
<col width="6%">
<col width="6%">
<col width="6%">
<col width="7%">
<col width="9%">
<col width="8%">
</colgroup>
<thead><tr class="header">
<th>metric</th>
<th>critical</th>
<th>variable</th>
<th>unit</th>
<th>model</th>
<th>scenario</th>
<th>region</th>
<th>period</th>
<th>min_red</th>
<th>min_yel</th>
<th>max_yel</th>
<th>max_red</th>
<th>ref_model</th>
<th>ref_scenario</th>
<th>ref_period</th>
</tr></thead>
<tbody><tr class="odd">
<td>absolute</td>
<td>yes</td>
<td>Cap|Electricity|Wind</td>
<td>GW</td>
<td></td>
<td></td>
<td>USA</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>50</td>
<td></td>
<td></td>
<td></td>
</tr></tbody>
</table>
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Pascal Weigmann, Oliver Richters, Fabrice Lécuyer.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
